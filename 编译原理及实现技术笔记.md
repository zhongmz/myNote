



#### 中间代码的生成

###### 中间代码生成的几个问题

- 操作分量或运算结果的地址表示为
  1. 标号类
  2. 数值类
  3. 地址类
- 语义栈`Sem`
  - `push(x)` 将`x`的类型和语义信息压入`Sem`栈中
  - `pop(n)` 将`Sem`栈顶的n个元素弹栈
  - `new_dir(t)` 在临时变量区申请一个t，且t是直接寻址
  - `new_indir(t)` 在临时变量区申请一个t，且t是间接寻址
  - `Generate(w,left,right,result)` 
  - `GenCode(w)`



- 其中

  - 对于临时变量的层数取-1

  

###### 表达式的中间代码生成

- 定义表达式的`LL(1)`文法

  ![算术表达式的LL1文法定义](https://i.loli.net/2020/10/14/63UfCaBut5lIqLE.png)

![屏幕截图 2020-10-14 162734](https://i.loli.net/2020/10/14/qUVofvhlNejZ78Q.png)

- 当遇到常量C和简单变狱id时， 把它们的语义信息压入语义栈（产生式9) 和
  10))。
- 当处理完一个运算符（＋、－、＊ 、／）的右分蜇时， 该运算符的左、右运算分量
  已经分别存放在语义栈`Sem`的次栈顶和栈顶的位置， 因此可以生成相应的运算符的四元式，
  并把运算结果的语义信息压入语义栈（产生式3) 、4)、7)和8))。

